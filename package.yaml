name: unbeliever
version: 0.7.3
synopsis: Opinionated Haskell Interoperability
description: |
  A library to help build command-line programs, both tools and
  longer-running daemons.
  
  Useful starting points are "Core.Program.Execute" and "Core.Text.Rope".

stability: experimental
license: BSD3
author: Andrew Cowie <andrew@operationaldynamics.com>
maintainer: Andrew Cowie <andrew@operationaldynamics.com>
copyright: Â© 2018 Operational Dynamics Consulting Pty Ltd, and Others
tested-with: GHC == 8.4
ghc-options: -Wall -Wwarn -fwarn-tabs

flags:
  development:
    manual: true
    default: false

dependencies:
 - aeson
 - async
 - base
 - bytestring
 - Cabal
 - chronologique
 - containers
 - deepseq
 - directory
 - exceptions
 - fingertree
 - hashable
 - hourglass
 - mtl
 - prettyprinter
 - prettyprinter-ansi-terminal
 - safe-exceptions
 - scientific
 - stm
 - template-haskell
 - terminal-size
 - text
 - text-short
 - transformers
 - unordered-containers
 - unix
 - vector

library:
  source-dirs: lib
  exposed-modules:
   - Core.Data
   - Core.Data.Structures
   - Core.Encoding
   - Core.Encoding.Json
   - Core.Program
   - Core.Program.Arguments
   - Core.Program.Execute
   - Core.Program.Logging
   - Core.Program.Metadata
   - Core.Program.Unlift
   - Core.Text
   - Core.Text.Bytes
   - Core.Text.Rope
   - Core.Text.Utilities
   - Core.System
   - Core.System.Base
   - Core.System.External
  other-modules:
   - Core.Program.Context
   - Core.Program.Signal

executables:
  experiment:
    when:
      - condition: flag(development)
        then:
          buildable: true
        else:
          buildable: false
    dependencies:
     - unbeliever
    ghc-options: -threaded
    source-dirs: tests
    main: SimpleExperiment.hs
    ghc-prof-options: -fprof-auto-top

  snippet:
    when:
      - condition: flag(development)
        then:
          buildable: true
        else:
          buildable: false
    dependencies:
     - unbeliever
    ghc-options: -threaded
    source-dirs: tests
    main: Snippet.hs
    other-modules: []
    ghc-prof-options: -fprof-auto-top

tests:
  check:
    dependencies:
     - hspec
     - unbeliever
    ghc-options: -threaded
    source-dirs:
     - tests
    main: TestSuite.hs
    other-modules:
     - CheckArgumentsParsing
     - CheckBytesBehaviour
     - CheckContainerBehaviour
     - CheckJsonWrapper
     - CheckProgramMonad
     - CheckRopeBehaviour

benchmarks:
  performance:
    dependencies:
     - gauge
     - unbeliever
    ghc-options: -threaded
    source-dirs:
     - bench
    main: GeneralPerformance.hs
    other-modules: []

